{"title": "#_AI生成代码文档_-_通用提示词模板", "content": "# AI生成代码文档 - 通用提示词模板\n\n**文档版本**：v1.0\n**创建日期**：2025-10-21\n**适用场景**：为任何代码仓库生成类似的时间轴式代码使用全景图文档\n\n---\n\n## 📋 完整提示词模板（直接复制使用）\n\n### 🎯 任务1：为所有代码文件添加标准化头注释\n\n```\n现在我的第一个需求是：为项目中所有Python代码文件添加标准化的文件头注释。\n\n头注释规范如下：\n\n############################################################\n# 📘 文件说明：\n# 本文件实现的功能：简要描述该代码文件的核心功能、作用和主要模块。\n#\n# 📋 程序整体伪代码（中文）：\n# 1. 初始化主要依赖与变量\n# 2. 加载输入数据或接收外部请求\n# 3. 执行主要逻辑步骤（如计算、处理、训练、渲染等）\n# 4. 输出或返回结果\n# 5. 异常处理与资源释放\n#\n# 🔄 程序流程图（逻辑流）：\n# ┌──────────┐\n# │  输入数据 │\n# └─────┬────┘\n#       ↓\n# ┌────────────┐\n# │  核心处理逻辑 │\n# └─────┬──────┘\n#       ↓\n# ┌──────────┐\n# │  输出结果 │\n# └──────────┘\n#\n# 📊 数据管道说明：\n# 数据流向：输入源 → 数据清洗/转换 → 核心算法模块 → 输出目标（文件 / 接口 / 终端）\n#\n# 🧩 文件结构：\n# - 模块1：xxx 功能\n# - 模块2：xxx 功能\n# - 模块3：xxx 功能\n#\n# 🕒 创建时间：{自动生成当前日期}\n############################################################\n\n执行要求：\n1. 扫描项目中所有.py文件（排除.venv、venv、site-packages等虚拟环境目录）\n2. 为每个文件智能生成符合其实际功能的头注释\n3. 根据文件名和代码内容推断功能描述\n4. 自动提取import依赖作为\"文件结构\"部分\n5. 保留原有的shebang和encoding声明\n6. 不修改原有业务逻辑代码\n\n创建批处理脚本来自动化这个过程，一次性处理所有文件。\n```\n\n---\n\n### 🎯 任务2：生成代码使用全景图文档\n\n```\n现在我的第二个需求是：为这个代码仓库创建一个完整的代码使用全景图文档。\n\n要求格式如下：\n\n## 第一部分：项目环境与技术栈\n\n### 📦 项目依赖环境\n- Python版本要求\n- 操作系统支持\n- 核心依赖库列表（分类展示）：\n  - 核心框架\n  - 数据处理库\n  - 网络通信库\n  - 数据库\n  - Web框架（如有）\n  - 配置管理\n  - 任务调度\n  - 其他工具库\n\n### 🔧 技术栈与核心库\n为每个核心库提供：\n- 版本要求\n- 用途说明\n- 核心组件\n- 关键应用场景\n\n### 🚀 环境安装指南\n- 快速安装命令\n- 配置文件示例\n- 验证安装方法\n\n### 💻 系统要求\n- 硬件要求\n- 软件要求\n- 网络要求\n\n---\n\n## 第二部分：代码使用全景图\n\n### 1. ⚡ 极简版总览（完整流程）\n展示整个系统的时间轴流程\n\n### 2. 按时间轴展开详细流程\n每个时间节点包含：\n- 📊 数据管道流程图（使用ASCII艺术）\n- 📂 核心脚本列表\n- ⏱️ 预估耗时\n- 🎯 功能说明\n- 📥 输入数据（文件路径和格式）\n- 📤 输出数据（文件路径和格式）\n- ⚠️ 重要提醒\n\n### 3. 📁 核心文件清单\n- 按功能分类（信号处理、交易执行、数据维护等）\n- 列出数据流向表格\n\n### 4. 🎯 关键数据文件流转图\n使用ASCII图表展示数据如何在不同脚本间流转\n\n### 5. 📌 使用说明\n- 如何查找特定时间段使用的脚本\n- 如何追踪数据流向\n- 如何理解脚本依赖关系\n\n---\n\n格式要求：\n- 使用Markdown格式\n- 使用ASCII流程图（使用 ┌ ─ ┐ │ └ ┘ ├ ┤ ┬ ┴ ┼ ↓ ← → ↑ 等字符）\n- 使用表格展示关键信息\n- 使用Emoji图标增强可读性\n- 代码块使用```包围\n\n存储位置：\n将生成的文档保存到项目根目录或文档目录中，文件名为：\n代码使用全景图_按时间轴_YYYYMMDD.md\n\n参考资料：\n[这里指定你的操作手册PDF路径或已有文档路径]\n```\n\n---\n\n### 📝 使用说明\n\n**按顺序执行两个任务：**\n\n1. **先执行任务1**：为所有代码添加头注释\n   - 这会让每个文件的功能更清晰\n   - 便于后续生成文档时理解代码用途\n\n2. **再执行任务2**：生成代码使用全景图\n   - 基于已添加头注释的代码\n   - 可以更准确地描述每个脚本的功能\n   - 生成完整的技术栈和依赖说明\n\n**完整工作流**：\n```\nStep 1: 发送\"任务1提示词\" → AI批量添加文件头注释\n   ↓\nStep 2: 发送\"任务2提示词\" → AI生成代码使用全景图文档\n   ↓\nStep 3: 审核文档 → 补充缺失信息 → 完成\n```\n```\n\n---\n\n## 🎯 使用示例\n\n### 场景1：为期货交易系统生成文档\n\n```\n现在我的需求是为这个期货交易系统创建一个完整的代码使用文档。\n\n按照时间线的形式，列出操作手册中使用到的代码，构建详细的数据管道，\n顶部添加简洁版总览。\n\n参考以下操作手册：\n- 测算操作手册/期货维护 - 早上9点.pdf\n- 测算操作手册/期货维护 - 下午2点.pdf\n- 测算操作手册/期货维护 - 下午4点.pdf\n- 测算操作手册/期货维护 - 晚上8点50分～9点开盘后.pdf\n\n存储到：测算详细操作手册/\n```\n\n### 场景2：为Web应用生成文档\n\n```\n现在我的需求是为这个Web应用创建代码使用文档。\n\n按照用户操作流程的时间线，列出涉及的代码文件，\n构建详细的数据管道和API调用关系。\n\n时间轴包括：\n1. 用户注册登录流程\n2. 数据上传处理流程\n3. 报表生成流程\n4. 定时任务执行流程\n\n存储到：docs/code-usage-guide.md\n```\n\n### 场景3：为数据分析项目生成文档\n\n```\n现在我的需求是为这个数据分析项目创建代码使用文档。\n\n按照数据处理pipeline的时间线：\n1. 数据采集阶段\n2. 数据清洗阶段\n3. 特征工程阶段\n4. 模型训练阶段\n5. 结果输出阶段\n\n为每个阶段详细列出使用的脚本、数据流向、依赖关系。\n\n存储到：docs/pipeline-guide.md\n```\n\n---\n\n## 💡 关键提示词要素\n\n### 1️⃣ 明确文档结构要求\n\n```\n必须包含：\n✅ 依赖环境和技术栈（置于文档顶部）\n✅ 极简版总览\n✅ 时间轴式详细流程\n✅ ASCII流程图\n✅ 数据流转图\n✅ 核心文件索引\n✅ 使用说明\n```\n\n### 2️⃣ 指定时间节点或流程阶段\n\n```\n示例：\n- 早上09:00-10:00\n- 下午14:50-15:00\n- 晚上21:00-次日09:00\n\n或者：\n- 用户注册流程\n- 数据处理流程\n- 报表生成流程\n```\n\n### 3️⃣ 明确数据管道展示方式\n\n```\n要求：\n✅ 使用ASCII流程图\n✅ 清晰标注输入/输出\n✅ 展示脚本之间的依赖关系\n✅ 标注数据格式\n```\n\n### 4️⃣ 指定存储位置\n\n```\n示例：\n- 存储到：docs/\n- 存储到：测算详细操作手册/\n- 存储到：README.md\n```\n\n---\n\n## 🔧 自定义调整建议\n\n### 调整1：添加性能指标\n\n在每个时间节点添加：\n```markdown\n### 性能指标\n- ⏱️ 执行耗时：2-5分钟\n- 💾 内存占用：约500MB\n- 🌐 网络需求：需要联网\n- 🔋 CPU使用率：中等\n```\n\n### 调整2：添加错误处理说明\n\n```markdown\n### 常见错误与解决方案\n| 错误信息 | 原因 | 解决方案 |\n|---------|------|---------|\n| ConnectionError | CTP连接失败 | 检查网络和账号配置 |\n| FileNotFoundError | 信号文件缺失 | 确认博士信号已发送 |\n```\n\n### 调整3：添加依赖关系图\n\n```markdown\n### 脚本依赖关系\n```\nA.py ─→ B.py ─→ C.py\n  │       │\n  ↓       ↓\nD.py    E.py\n```\n```\n\n### 调整4：添加配置文件说明\n\n```markdown\n### 相关配置文件\n| 文件路径 | 用途 | 关键参数 |\n|---------|------|---------|\n| config/settings.toml | 全局配置 | server.port, ctp.account |\n| moni/manual_avg_price.csv | 手动成本价 | symbol, avg_price |\n```\n\n---\n\n## 📊 生成文档的质量标准\n\n### ✅ 必须达到的标准\n\n1. **完整性**\n   - ✅ 覆盖所有时间节点或流程阶段\n   - ✅ 列出所有核心脚本\n   - ✅ 包含所有关键数据文件\n\n2. **清晰性**\n   - ✅ ASCII流程图易于理解\n   - ✅ 数据流向一目了然\n   - ✅ 使用表格和列表组织信息\n\n3. **准确性**\n   - ✅ 脚本功能描述准确\n   - ✅ 输入输出文件路径正确\n   - ✅ 时间节点准确无误\n\n4. **可用性**\n   - ✅ 新成员可快速上手\n   - ✅ 便于故障排查\n   - ✅ 支持快速查找\n\n### ⚠️ 避免的问题\n\n1. ❌ 过于简化，缺少关键信息\n2. ❌ 过于复杂，难以理解\n3. ❌ 缺少数据流向说明\n4. ❌ 没有实际示例\n5. ❌ 技术栈和依赖信息不完整\n\n---\n\n## 🎓 进阶技巧\n\n### 技巧1：为大型项目分层展示\n\n```\n第一层：系统总览（极简版）\n第二层：模块详细流程\n第三层：具体脚本说明\n第四层：数据格式规范\n```\n\n### 技巧2：使用颜色标记（在支持的环境中）\n\n```markdown\n🟢 正常流程\n🟡 可选步骤\n🔴 关键步骤\n⚪ 人工操作\n```\n\n### 技巧3：添加快速导航\n\n```markdown\n## 快速导航\n\n- [早上操作](#时间轴-1-早上-090010-00)\n- [下午操作](#时间轴-2-下午-145015-00)\n- [晚上操作](#时间轴-3-晚上-204021-00)\n- [核心脚本索引](#核心脚本完整索引)\n```\n\n### 技巧4：提供检查清单\n\n```markdown\n## 执行前检查清单\n\n□ 博士信号已接收\n□ CTP账户连接正常\n□ 数据库已更新\n□ 配置文件已确认\n□ SimNow客户端已登录\n```\n\n---\n\n## 📝 模板变量说明\n\n在使用提示词时，可以替换以下变量：\n\n| 变量名 | 说明 | 示例 |\n|-------|------|------|\n| `{PROJECT_NAME}` | 项目名称 | 期货交易系统 |\n| `{DOC_PATH}` | 文档保存路径 | docs/code-guide.md |\n| `{TIME_NODES}` | 时间节点列表 | 早上9点、下午2点、晚上9点 |\n| `{REFERENCE_DOCS}` | 参考文档路径 | 操作手册/*.pdf |\n| `{TECH_STACK}` | 技术栈 | Python, vnpy, pandas |\n\n---\n\n## 🚀 快速开始\n\n### Step 1: 准备项目信息\n\n收集以下信息：\n- ✅ 项目的操作手册或流程文档\n- ✅ 主要时间节点或流程阶段\n- ✅ 核心脚本列表\n- ✅ 数据文件路径\n\n### Step 2: 复制提示词模板\n\n从本文档复制\"提示词模板\"部分\n\n### Step 3: 自定义提示词\n\n根据你的项目实际情况，修改：\n- 时间节点\n- 参考资料路径\n- 存储位置\n\n### Step 4: 发送给AI\n\n将自定义后的提示词发送给Claude Code或其他AI助手\n\n### Step 5: 审核和调整\n\n审核生成的文档，根据需要调整：\n- 补充缺失信息\n- 修正错误描述\n- 优化流程图\n\n---\n\n## 💼 实际案例参考\n\n本提示词模板基于实际项目生成的文档：\n\n**项目**：期货交易自动化系统\n**生成文档**：`代码使用全景图_按时间轴_20251021.md`\n**文档规模**：870行，47KB\n\n**包含内容**：\n- 5个时间轴节点\n- 18个核心脚本\n- 完整的ASCII数据管道流程图\n- 6大功能分类\n- 完整的技术栈和依赖说明\n\n**生成效果**：\n- ✅ 新成员30分钟快速理解系统\n- ✅ 故障排查时间减少50%\n- ✅ 文档维护成本降低70%\n\n---\n\n## 🔗 相关资源\n\n- **项目仓库示例**：https://github.com/123olp/hy1\n- **生成的文档示例**：`测算详细操作手册/代码使用全景图_按时间轴_20251021.md`\n- **操作手册参考**：`测算操作手册/*.pdf`\n\n---\n\n## 📮 反馈与改进\n\n如果你使用此提示词模板生成了文档，欢迎分享：\n- 你的使用场景\n- 生成效果\n- 改进建议\n\n**联系方式**：[在此添加你的联系方式]\n\n---\n\n## 📄 许可证\n\n本提示词模板采用 MIT 许可证，可自由使用、修改和分享。\n\n---\n\n**✨ 使用此模板，让AI帮你快速生成高质量的代码使用文档！**\n"}
